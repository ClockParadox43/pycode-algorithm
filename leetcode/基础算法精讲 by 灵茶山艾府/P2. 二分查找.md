[toc]

# 内容

> 1. 二分查找在$[]，()，(]$上的写法
> 2. 如何处理 $>，<，\geq，\leq$ 这4种情况

## 二分思想

> <img src="https://pic.imgdb.cn/item/64a1a47f1ddac507cc99173b.jpg" width=50%>

> 如果我们想知道这个该**闭区间**数组中，所有数与8的大小关系，高效的做法可以让两个指针分别指向**L**和**R**两个端点。

> 由于数组是**有序**的，所以只需取**中间**的数就能立刻知道数组中一半的元素和8的大小关系，有$\lfloor \frac{L+R}{2} \rfloor$，$M$停在7的位置。`PS: 这里c++, java这类语言的加法可能会出现溢出的问题`

> <img src="https://pic.imgdb.cn/item/64a1a8411ddac507cc9f4c7f.jpg" width=50%>

> 随后，将$L$更新至$M+1$的位置，
>
> **PS:** 不能更新至$M$，因为这一个**闭区间**！如果改成L=M，那么$L$只排除了区间$[0,1]$，L依旧停留在7，但是由于对$L$的定义：$L$**必须排除掉严格小于8的数。**
>
> &emsp;&emsp;$L$将7保留下说明这是个**左开右闭**的区间，所以当中间只有一个数时可能会发生死循环。
>
> <img src="https://pic.imgdb.cn/item/64a1ad361ddac507cca65f7d.jpg" width=50%>

> 中位数$M$确定在8的位置，随后右边的8和10因为$\geq8$被$R$排除掉，$R$被更新为$M-1$，这时候只剩下中间的一个数还未被确定。

> <img src="https://pic.imgdb.cn/item/64a1af2b1ddac507cca90bcd.jpg" width=50%>

> 随后访问剩下的数，因为$M$指向的数$\geq$8，所以$R$被更新到$L$的左边，此时$R$和$L$错开，说明所有数被访问完了，此时结束循环。
>
> 这个过程中，我们发现，$L$指向的始终是红色（$<8$）的位置，而$R$指向的始终是蓝色（$\geq8$）的位置，这个就是**循环不变式**。
>
> 根据**循环不变式**最后的$R$+1就是**答案**，由于$R+1=L$，所以用$L$也可以表示。
>
> <br/>
>
> **极端情况:** 如果所有的数都$\leq$8呢? 那么$L$会一直向右移动，最后会移动到$R$的右边，所以最终$L$是可以等于数组长度的。

### lc34. 在排序数组中查找元素的第一个和最后一个位置

#### 题目链接

> `https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/`

#### 题目分析

> 用二分扫一遍即可。

#### AC代码

```python

```
